{%- extends 'mail/base/base.twig' -%}
{%- trans_default_domain 'mail' -%}

{%- block subject_line -%}
    {{- 'register_confirm.subject'|trans({
        '%system_name%': config_str('system.name', schema)}) -}}
{%- endblock subject_line %}

{%- block html_content -%}
{%- trans_default_domain 'mail' -%}

<p>
    {{- 'register_confirm.html_msg'|trans({
        '%link_open%': context_url_open('register_token', mpp_anon_ary(schema), {'token': token}),
        '%link_close%': '</a>'
    })|raw -}}
</p>

<p>
    {{- 'expiration.1_week'|trans -}}
</p>

<p>
    {{- 'register_confirm.explain'|trans({
        '%system_name%': config_str('system.name', schema),
        '%link_open%': context_url_open('register', mpp_anon_ary(schema), {}),
        '%link_close%': '</a>'
    })|raw -}}
</p>
{%- endblock html_content -%}

{% block text_content %}
{% autoescape false %}

{{ 'register_confirm.text_msg'|trans }}

{{ context_url('register_token', mpp_anon_ary(schema), {'token': token}) }}

{{ 'expiration.1_week'|trans }}

{{ 'register_confirm.explain'|trans({
    '%system_name%': config_str('system.name', schema),
    '%link_open%': '',
    '%link_close%': ''
}) }}

{{ context_url('register', mpp_anon_ary(schema), {}) }}

{% endautoescape %}
{% endblock text_content %}
